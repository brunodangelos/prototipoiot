<script type="text/javascript">
  RED.nodes.registerType('typedinput test', {
    category: "tests",
    color: "#FFFF00",
    defaults: {
      name:  {value:""},
      test_string:{value:"default string", required:true},
      'test_string-type':{value:"str"},
      test_number:{value:125, required:true},
      'test_number-type':{value:"num"},
    },
    inputs: 0,
    outputs: 1,
    icon: "font-awesome/fa-th",
    paletteLabel: "typedinput test",

    label() { return this.name || "typedinput test" },

    oneditprepare() {
      console.log("oneditprepare", this)
      $("#node-input-test_string").typedInput({
        type:"str",
        types:["str","num","bool"],
        typeField: "#node-input-test_string-type"
      })
      $("#node-input-test_number").typedInput({
        type:"num",
        types:["str","num","bool"],
        typeField: "#node-input-test_number-type"
      })
    },
    oneditsave() { debugger }
  });
</script>

<script type="text/html" data-template-name="typedinput test">
  <div class="form-row">
    <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
    <input type="text" id="node-input-name" placeholder="Name" />
  </div>
  <div class="form-row">
    <label for="node-input-test_string">Test string</label>
    <input type="text" id="node-input-test_string" />
    <input type="hidden" id="node-input-test_string-type" />
  </div>
  <div class="form-row">
    <label for="node-input-test_number">Test number</label>
    <input type="text" id="node-input-test_number" />
    <input type="hidden" id="node-input-test_number-type" />
  </div>
</script>

<script type="text/html" data-help-name="typedinput test"></script>
