module.exports = function(RED) {
  function interactiveNode(config) {
    RED.nodes.createNode(this, config)
    var context =  this.context()
    this.ID = config.ID
    var node = this
    this.on('input', function(msg) {
      var data = JSON.parse(msg.payload)
      if (Object.keys(data)[0] && Object.keys(data)[0] == node.ID){
        msg.payload = Object.values(data)[0]['value']
      } else {
        msg = undefined
      }
      node.send(msg)
    })
  }
  RED.nodes.registerType("interactiveNode", interactiveNode)
}